#!/usr/bin/env sh

# Block commit if package.json changed without package-lock.json
if git diff --name-only --cached | grep -q "^package.json$"; then
  if ! git diff --name-only --cached | grep -q "^package-lock.json$"; then
    echo "Error: package.json changed but package-lock.json is not staged. Run 'npm install' and commit package-lock.json'." >&2
    exit 1
  fi
fi

npx lint-staged
